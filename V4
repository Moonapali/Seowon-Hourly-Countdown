<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#007fb9">
  <meta name="description" content="Track your weekly teaching hours across the semester with Seowon's Weekly Schedule Tracker.">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Weekly Tracker">
  <link rel="manifest" href="data:application/json,{%22name%22:%22Seowon%20Weekly%20Schedule%20Tracker%22,%22short_name%22:%22Weekly%20Tracker%22,%22description%22:%22Track%20your%20teaching%20hours%20across%20the%20semester%22,%22start_url%22:%22/%22,%22scope%22:%22/%22,%22display%22:%22fullscreen%22,%22orientation%22:%22portrait-primary%22,%22theme_color%22:%22%23007fb9%22,%22background_color%22:%22%23ffffff%22,%22icons%22:[{%22src%22:%22data:image/svg+xml,%3Csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20viewBox=%270%200%20192%20192%27%3E%3Crect%20fill=%27%23007fb9%27%20width=%27192%27%20height=%27192%27/%3E%3Ctext%20x=%2796%27%20y=%27120%27%20font-size=%2780%27%20font-weight=%27bold%27%20fill=%27%23ffffff%27%20text-anchor=%27middle%27%20dominant-baseline=%27middle%27%3EW%3C/text%3E%3C/svg%3E%22,%22sizes%22:%22192x192%22,%22type%22:%22image/svg+xml%22,%22purpose%22:%22any%22}]}">
  <title>Weekly Schedule Tracker</title>
  <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: linear-gradient(180deg, #007fb9 0%, #145da0 100%);
            color: #145da0;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .wrapper {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            color: #ffffff;
        }

        .header h1 {
            font-size: 42px;
            margin: 0 0 10px 0;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
            margin: 0;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .section {
            background: #ffffff;
            border-radius: 16px;
            padding: 35px;
            box-shadow: 0 20px 40px rgba(20, 93, 160, 0.15);
            border-left: 5px solid #007fb9;
        }

        .section h2 {
            font-size: 18px;
            font-weight: 600;
            margin: 0 0 25px 0;
            color: #145da0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #007fb9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #b1d4e0;
            border-radius: 8px;
            background: #f8fbfc;
            color: #145da0;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus {
            outline: none;
            border-color: #007fb9;
            background: #ffffff;
            box-shadow: 0 0 0 4px rgba(0, 127, 185, 0.1);
        }

        input[readonly] {
            background: #ecf2f7;
            cursor: not-allowed;
            color: #007fb9;
            font-weight: 600;
        }

        .weekday-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .weekday-item label {
            margin-bottom: 6px;
            font-size: 12px;
        }

        .weekday-item input {
            padding: 10px 12px;
            font-size: 13px;
        }

        .summary-section {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #007fb9 0%, #145da0 100%);
            border-radius: 16px;
            padding: 35px;
            color: #ffffff;
            border-left: none;
        }

        .summary-section h2 {
            color: #b1d4e0;
            margin-bottom: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
        }

        .summary-item {
            text-align: center;
        }

        .summary-value {
            font-size: 36px;
            font-weight: 700;
            color: #b1d4e0;
            margin-bottom: 8px;
        }

        .summary-label {
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.85;
            font-weight: 500;
        }

        .today-highlight {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid #b1d4e0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
        }

        .today-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.85;
            margin-bottom: 8px;
        }

        .today-hours {
            font-size: 32px;
            font-weight: 700;
            color: #b1d4e0;
        }

        .today-date {
            font-size: 12px;
            opacity: 0.75;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 32px;
            }

            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .section {
                padding: 25px;
            }

            .weekday-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 26px;
            }

            .section {
                padding: 20px;
            }

            .summary-value {
                font-size: 28px;
            }

            .today-hours {
                font-size: 24px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="wrapper">
   <div class="header">
    <h1>WEEKLY SCHEDULE</h1>
    <p>Track your teaching hours across the semester</p>
   </div>
   <div class="content"><!-- Left Section: Teacher Info & Dates -->
    <div class="section">
     <h2>Teacher Information</h2>
     <div class="form-group"><label for="teacherName">Teacher Name</label> <input type="text" id="teacherName" placeholder="Enter your name">
     </div>
     <div class="form-group"><label for="startDate">Semester Start Date</label> <input type="date" id="startDate">
     </div>
     <div class="form-group"><label for="endDate">Semester End Date</label> <input type="date" id="endDate">
     </div>
     <div class="form-group"><label for="hoursInput">Weekly Total (auto)</label> <input id="hoursInput" type="number" readonly>
     </div>
    </div><!-- Right Section: Weekly Schedule -->
    <div class="section">
     <h2>Weekly Schedule</h2>
     <div class="weekday-grid">
      <div class="weekday-item"><label for="monHours">Monday</label> <input id="monHours" type="number" min="0" step="0.5" value="0">
      </div>
      <div class="weekday-item"><label for="tueHours">Tuesday</label> <input id="tueHours" type="number" min="0" step="0.5" value="0">
      </div>
      <div class="weekday-item"><label for="wedHours">Wednesday</label> <input id="wedHours" type="number" min="0" step="0.5" value="0">
      </div>
      <div class="weekday-item"><label for="thuHours">Thursday</label> <input id="thuHours" type="number" min="0" step="0.5" value="0">
      </div>
      <div class="weekday-item"><label for="friHours">Friday</label> <input id="friHours" type="number" min="0" step="0.5" value="0">
      </div>
     </div>
    </div><!-- Summary Section -->
    <div class="summary-section" id="summarySection" style="display: none;">
     <h2>Semester Overview</h2>
     <div class="summary-grid">
      <div class="summary-item">
       <div class="summary-value" id="weeksValue">
        0
       </div>
       <div class="summary-label">
        Teaching Weeks
       </div>
      </div>
      <div class="summary-item">
       <div class="summary-value" id="totalValue">
        0
       </div>
       <div class="summary-label">
        Total Hours
       </div>
      </div>
      <div class="summary-item">
       <div class="summary-value" id="consumedValue">
        0
       </div>
       <div class="summary-label">
        Consumed Hours
       </div>
      </div>
      <div class="summary-item">
       <div class="summary-value" id="remainingValue">
        0
       </div>
       <div class="summary-label">
        Remaining Hours
       </div>
      </div>
     </div>
     <div class="today-highlight">
      <div class="today-label">
       Today's Hours
      </div>
      <div class="today-hours" id="todayHours">
       0
      </div>
      <div class="today-date" id="todayDate"></div>
     </div>
    </div>
   </div>
  </div>
  <script>
        const teacherInput = document.getElementById("teacherName");
        const hoursInput = document.getElementById("hoursInput");
        const startDateInput = document.getElementById("startDate");
        const endDateInput = document.getElementById("endDate");
        const summarySection = document.getElementById("summarySection");

        function dateFromISO(iso) {
            const [y, m, d] = iso.split("-").map(Number);
            return new Date(y, m - 1, d);
        }

        function diffInDays(a, b) {
            const msPerDay = 24 * 60 * 60 * 1000;
            const aNoon = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 12);
            const bNoon = new Date(b.getFullYear(), b.getMonth(), b.getDate(), 12);
            return Math.round((bNoon - aNoon) / msPerDay);
        }

        function rangesOverlap(aStart, aEnd, bStart, bEnd) {
            return aStart <= bEnd && bStart <= aEnd;
        }

        function calculateWeeklyHours() {
            const mon = Number(document.getElementById("monHours").value) || 0;
            const tue = Number(document.getElementById("tueHours").value) || 0;
            const wed = Number(document.getElementById("wedHours").value) || 0;
            const thu = Number(document.getElementById("thuHours").value) || 0;
            const fri = Number(document.getElementById("friHours").value) || 0;

            const total = mon + tue + wed + thu + fri;
            document.getElementById("hoursInput").value = total;

            updateOutput();
        }

        ["monHours", "tueHours", "wedHours", "thuHours", "friHours"].forEach(id => {
            document.getElementById(id).addEventListener("input", calculateWeeklyHours);
        });

        function getWeeklySchedule() {
            return {
                1: Number(document.getElementById("monHours").value) || 0,
                2: Number(document.getElementById("tueHours").value) || 0,
                3: Number(document.getElementById("wedHours").value) || 0,
                4: Number(document.getElementById("thuHours").value) || 0,
                5: Number(document.getElementById("friHours").value) || 0
            };
        }

        function calculateConsumedHours(startDate, endDate) {
            const schedule = getWeeklySchedule();
            let totalConsumed = 0;

            const current = new Date(startDate);

            while (current <= endDate) {
                const day = current.getDay();

                if (schedule[day]) {
                    totalConsumed += schedule[day];
                }

                current.setDate(current.getDate() + 1);
            }

            return totalConsumed;
        }

        function formatDateLocal(d) {
            const y = d.getFullYear();
            const m = String(d.getMonth() + 1).padStart(2, "0");
            const day = String(d.getDate()).padStart(2, "0");
            return `${y}-${m}-${day}`;
        }

        function updateOutput() {
            const name = teacherInput.value;
            const hours = Number(hoursInput.value);
            const startISO = startDateInput.value;
            const endISO = endDateInput.value;

            if (!name || !hours || !startISO || !endISO) {
                summarySection.style.display = "none";
                return;
            }

            const start = dateFromISO(startISO);
            const end = dateFromISO(endISO);

            const today = new Date();
            today.setHours(12, 0, 0, 0);

            let consumedHours = 0;

            if (today < start) {
                consumedHours = 0;
            } else {
                const effectiveEnd = (today < end) ? today : end;
                consumedHours = calculateConsumedHours(start, effectiveEnd);
            }

            const days = diffInDays(start, end);
            const rawWeeks = Math.floor(days / 7) + 1;

            const sweatStart = dateFromISO("2026-03-23");
            const sweatEnd = dateFromISO("2026-03-27");

            let teachingWeeks = rawWeeks;
            if (rangesOverlap(start, end, sweatStart, sweatEnd)) {
                teachingWeeks -= 1;
            }

            const totalHours = teachingWeeks * hours;
            const remainingHours = totalHours - consumedHours;

            const schedule = getWeeklySchedule();
            const todayPlannedHours = schedule[today.getDay()] || 0;

            document.getElementById("weeksValue").textContent = teachingWeeks;
            document.getElementById("totalValue").textContent = totalHours;
            document.getElementById("consumedValue").textContent = consumedHours;
            document.getElementById("remainingValue").textContent = remainingHours;
            document.getElementById("todayHours").textContent = todayPlannedHours;
            document.getElementById("todayDate").textContent = formatDateLocal(today);

            summarySection.style.display = "grid";
        }

        teacherInput.addEventListener("input", updateOutput);
        startDateInput.addEventListener("input", updateOutput);
        endDateInput.addEventListener("input", updateOutput);

        calculateWeeklyHours();

        // Register Service Worker for offline functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
const CACHE_NAME = 'weekly-tracker-v1';

self.addEventListener('install', event => {
  self.skipWaiting();
});

self.addEventListener('activate', event => {
  self.clients.claim();
});

self.addEventListener('fetch', event => {
  if (event.request.method !== 'GET') {
    return;
  }
  event.respondWith(
    caches.match(event.request).then(response => {
      if (response) {
        return response;
      }
      return fetch(event.request).then(response => {
        if (!response || response.status !== 200 || response.type !== 'basic') {
          return response;
        }
        const responseToCache = response.clone();
        caches.open(CACHE_NAME).then(cache => {
          cache.put(event.request, responseToCache);
        });
        return response;
      }).catch(() => {
        return caches.match('/index.html');
      });
    })
  );
});
`;
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                navigator.serviceWorker.register(swUrl).catch(err => {
                    console.log('ServiceWorker registration available');
                });
            });
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c974af256f3ea0b',t:'MTc3MDM0NTczMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
